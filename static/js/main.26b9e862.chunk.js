(this.webpackJsonptinder=this.webpackJsonptinder||[]).push([[0],{103:function(e,a,t){"use strict";t.r(a);var n=t(1),r=t.n(n),c=t(32),o=t.n(c),i=(t(74),t(75),t(19)),l=t(68),s=t(20),u=t(25),m=t.n(u),d=t(38),p=t.n(d);function E(e){return function(){return console.log(e)}}function g(e){var a=e.name,t=e.image,n=e.rightClick,c=e.leftClick,o=e.hide;return r.a.createElement("div",{className:m.a.container},r.a.createElement("div",{className:m.a.card},r.a.createElement("img",{alt:"rick",src:t}),r.a.createElement("p",{className:m.a.name},a),!o&&r.a.createElement("div",{className:m.a.actions},r.a.createElement("div",{onClick:c||E("left"),className:m.a.left},r.a.createElement(p.a,{name:"thumbs-down",size:"2x"})),r.a.createElement("div",{onClick:n||E("right"),className:m.a.right},r.a.createElement(p.a,{name:"heart",size:"2x"})))))}g.defaultProps={name:"Rick Sanches",image:"https://rickandmortyapi.com/api/character/avatar/1.jpeg"};var f=t(56),h=t.n(f),v=t(17),_=t(29),O=t(21),y=t.n(O),S=t(11),C=t(58),b=(t(59),t(26));t(97),t(104);b.a.initializeApp({apiKey:"AIzaSyDw23eEK3GczAH2X71b77eVwGdViVdB-qI",authDomain:"rickandmorty-c69c5.firebaseapp.com",projectId:"rickandmorty-c69c5",storageBucket:"rickandmorty-c69c5.appspot.com",messagingSenderId:"184118299134",appId:"1:184118299134:web:0611fa08e0c09d7671d8af",measurementId:"G-J1NTMCYDCZ"});var A=b.a.firestore().collection("favs"),T=t(35),R=t(55);function I(){var e=Object(C.a)(["\n  query ($page:Int){\n    characters(page:$page){\n      info{\n        pages\n        next\n        prev\n      }\n      results{\n        name\n        image\n      }\n    }\n  }\n"]);return I=function(){return e},e}var G={array:[],loadingChars:!0,errorChars:"",favorites:[],loadingFavs:!0,errorFavs:"",nextPage:1},j=new T.a({uri:"https://rickandmortyapi.com/graphql"}),N=Object(R.a)(I()),F=function(){return function(e,a){var t;return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e({type:"GET_CHARACTERS"}),t=a().characters.nextPage,n.next=4,y.a.awrap(j.query({query:N,variables:{page:t}}).then((function(a){e({type:"GET_CHARACTERS_SUCCESS",payload:a.data.characters.results}),e({type:"UPDATE_PAGE",payload:a.data.characters.info.next?a.data.characters.info.next:1})})).catch((function(a){console.log(a),e({type:"GET_CHARACTERS_FAILURE",payload:a.message})})));case 4:case"end":return n.stop()}}))}},k=function(){return function(e,a){e({type:"GET_FAVORITES_DB"}),function(e){return A.doc(e).get().then((function(e){return e.data().array}))}(a().user.id).then((function(t){var n;e({type:"GET_FAVORITES_DB_SUCCESS",payload:Object(_.a)(t)}),n=a(),localStorage.setItem("user",JSON.stringify(n))})).catch((function(a){console.log(a),e({type:"GET_FAVORITES_DB_FAILURE",payload:a.message})}))}},w=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:G,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"GET_CHARACTERS":return Object(S.a)({},e,{loadingChars:!1});case"GET_CHARACTERS_SUCCESS":return Object(S.a)({},e,{array:a.payload,loadingChars:!0});case"GET_CHARACTERS_FAILURE":return Object(S.a)({},e,{errorChars:a.payload,loadingChars:!0});case"REMOVE_CHARACTER":return Object(S.a)({},e,{array:a.payload});case"ADD_TO_FAVORITES":return Object(S.a)({},e,{},a.payload);case"GET_FAVORITES_DB":return Object(S.a)({},e,{loadingFavs:!1});case"GET_FAVORITES_DB_SUCCESS":return Object(S.a)({},e,{loadingFavs:!0,favorites:a.payload});case"GET_FAVORITES_DB_FAILURE":return Object(S.a)({},e,{loadingFavs:!0,errorFavs:a.payload});case"UPDATE_PAGE":return Object(S.a)({},e,{nextPage:a.payload});default:return e}},U=Object(v.b)((function(e){return{CHARACTERS:e.characters.array}}),{removeCharacter:function(){return function(e,a){var t=a().characters.array;t.shift(),0!==t.length?e({type:"REMOVE_CHARACTER",payload:Object(_.a)(t)}):F()(e,a)}},addToFavorites:function(){return function(e,a){var t=a().characters,n=t.array,r=t.favorites,c=n.shift();r.push(c),function(e,a){A.doc(a).set({array:e})}(r,a().user.id),localStorage.setItem("user",JSON.stringify(a())),e({type:"ADD_TO_FAVORITES",payload:{array:Object(_.a)(n),favorites:Object(_.a)(r)}})}}})((function(e){var a=e.CHARACTERS,t=e.removeCharacter,n=e.addToFavorites;function c(){t()}var o=function(){n()};return r.a.createElement("div",{className:h.a.container},r.a.createElement("h2",null,"Personajes de Rick y Morty"),r.a.createElement("div",null,function(){var e=a[0];return r.a.createElement(g,Object.assign({rightClick:o,leftClick:c},e))}()))})),L=t(41),x=t.n(L),D=Object(v.b)((function(e){return{FAVS:e}}))((function(e){var a=e.FAVS;console.log(A);return r.a.createElement(r.a.Fragment,null,a.characters.favorites?r.a.createElement("div",{className:x.a.container},r.a.createElement("h2",null,"Favoritos"),a.characters.favorites.map((function(e,a){return r.a.createElement(g,{name:e.name,image:e.image,hide:!0,key:a})})),r.a.createElement("button",{onClick:function(){if(a&&a.characters&&a.characters.favorites){var e=a.characters.favorites;console.log(e)}}}," borrar todo ")):r.a.createElement("div",{className:x.a.container},r.a.createElement("h2",null,"No hay personajes agregados"),"}"))})),V=t(42),H=t.n(V),P={loggedIn:!1,fetching:!1},B=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:P,a=arguments.length>1?arguments[1]:void 0;switch(a.type){case"LOGIN":return Object(S.a)({},e,{fetching:!0});case"LOGIN_SUCCESS":return Object(S.a)({},e,{fetching:!1},a.payload,{loggedIn:!0});case"LOGIN_FAILURE":return Object(S.a)({},e,{fetching:!1,error:a.payload});case"LOGOUT":return Object(S.a)({},e);default:return e}},J=t(64),z=t.n(J),q=Object(v.b)((function(e){return{LOGGED:e.user}}),{doLoginGoogle:function(){return function(e,a){e({type:"LOGIN"}),function(){var e=new b.a.auth.GoogleAuthProvider;return b.a.auth().signInWithPopup(e).then((function(e){var a={id:e.user.uid,name:e.user.displayName,email:e.user.email,photo:e.user.photoURL};return console.log("USUARIO:",a),a})).catch((function(e){var a=e.message;return console.log("ERROR:",a),a}))}().then((function(t){return y.a.async((function(n){for(;;)switch(n.prev=n.next){case 0:return e({type:"LOGIN_SUCCESS",payload:{id:t.id,name:t.name,email:t.email,photo:t.photo}}),n.next=3,y.a.awrap(k()(e,a));case 3:case"end":return n.stop()}}))})).catch((function(a){console.log(a),e({type:"LOGIN_FAILURE",payload:a.message})}))}},logOutSesion:function(){return function(e){b.a.auth().signOut(),e({type:"LOGOUT"}),localStorage.clear(),window.location.reload()}}})((function(e){var a=e.LOGGED,t=e.doLoginGoogle,n=e.logOutSesion,c=Object(s.g)();return r.a.createElement(r.a.Fragment,null,a&&a.fetching?r.a.createElement("div",null,r.a.createElement("img",{src:z.a,alt:"loading..."})):r.a.createElement(r.a.Fragment,null,a.loggedIn?r.a.createElement("div",{className:H.a.container},r.a.createElement("h1",null,"Para ver a los personajes dirigete al inicio"),r.a.createElement("button",{onClick:function(){return c.push("/")}},"Ir"),r.a.createElement("h1",null,"Finaliza sesi\xf3n"),r.a.createElement("button",{onClick:function(){n()}},"Salir")):r.a.createElement("div",{className:H.a.container},r.a.createElement("h1",null,"Inicia Sesi\xf3n con Google para comenzar"),r.a.createElement("button",{onClick:function(){t()}},"ir Google Auth"))))})),M=Object(v.b)((function(e){return{AUTH:e}}))((function(e){var a=e.AUTH,t=function(e){var t=e.path,n=e.component,c=Object(l.a)(e,["path","component"]);return a.user&&!0===a.user.loggedIn?r.a.createElement(s.b,Object.assign({path:t,component:n},c)):r.a.createElement(s.a,Object.assign({to:"/login"},c))};return r.a.createElement(s.d,null,r.a.createElement(t,{exact:!0,path:"/",component:U}),r.a.createElement(t,{path:"/favs",component:D}),r.a.createElement(s.b,{path:"/login",component:q}))}));var W=function(){return r.a.createElement("div",null,r.a.createElement("div",{className:"nav-bar"},r.a.createElement(i.b,{className:"link",activeClassName:"active",exact:!0,to:"/"},"Inicio"),r.a.createElement(i.b,{className:"link",activeClassName:"active",to:"/favs"},"Favoritos"),r.a.createElement(i.b,{className:"link",activeClassName:"active",to:"/login"},"Login")),r.a.createElement(M,null))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));t(102);var K=t(30),X=t(67),$=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||K.c,Y=Object(K.b)({user:B,characters:w}),Z=function(){var e=Object(K.d)(Y,$(Object(K.a)(X.a)));return F()(e.dispatch,e.getState),function(e){var a=JSON.parse(localStorage.getItem("user"));a&&a.user&&e({type:"LOGIN_SUCCESS",payload:a.user})}(e.dispatch),function(e,a){var t=JSON.parse(localStorage.getItem("user"));if(console.log(t),t&&t.characters)e({type:"GET_FAVORITES_DB_SUCCESS",payload:t.characters.favorites})}(e.dispatch,e.getState),e},Q=t(107),ee=Z(),ae=new T.a({uri:"https://rickandmortyapi.com/graphql"}),te=function(){return r.a.createElement(i.a,null,r.a.createElement(W,null))},ne=function(){return r.a.createElement(v.a,{store:ee},r.a.createElement(te,null))};o.a.render(r.a.createElement((function(){return r.a.createElement(Q.a,{client:ae},r.a.createElement(ne,null))}),null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},25:function(e,a,t){e.exports={container:"card_container__3G4Fa",card:"card_card__1py-W",name:"card_name__31aE7",actions:"card_actions__31KML",left:"card_left__kmFAA",right:"card_right__ikHyB"}},41:function(e,a,t){e.exports={container:"favs_container__1T6OY"}},42:function(e,a,t){e.exports={container:"login_container__2teO8"}},56:function(e,a,t){e.exports={container:"home_container__2grJ2"}},64:function(e,a,t){e.exports=t.p+"static/media/spinner.321c9524.gif"},69:function(e,a,t){e.exports=t(103)},74:function(e,a,t){},75:function(e,a,t){}},[[69,1,2]]]);
//# sourceMappingURL=main.26b9e862.chunk.js.map